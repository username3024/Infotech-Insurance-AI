# AI Restaurant Underwriter API Documentation

## Introduction
This document provides detailed information about the API endpoints available in the AI Restaurant Underwriter system. These endpoints allow for the submission of restaurant applications and retrieval of their underwriting assessments.

---

## Endpoint: Submit Application

*   **Description:** Submits a new restaurant application for automated underwriting assessment. The system calculates a risk score, determines a premium, and makes an initial underwriting decision.
*   **Method:** `POST`
*   **URL:** `/applications/submit`
*   **Request Body (`application/json`):**
    The JSON payload should contain the following fields representing the restaurant's application details:

    *   `application_id: string` (Note: While part of the model, this is generated by the server upon submission and should not be sent by the client. If sent, it might be ignored or cause an error depending on server-side handling not explicitly defined here but common in such APIs).
    *   `business_name: string (required)` - The legal name of the business.
    *   `address: string (required)` - The full physical address of the restaurant.
    *   `cuisine_type: string (required)` - The primary type of cuisine served (e.g., "Italian", "Mexican", "Sushi", "Steakhouse").
    *   `alcohol_sales_percentage: float (required)` - The estimated percentage of total sales derived from alcohol (e.g., 0.25 for 25%). Must be between 0.0 and 1.0.
    *   `operating_hours: string (required)` - The typical operating hours (e.g., "9am-5pm", "6pm-2am").
    *   `square_footage: int (required)` - The total square footage of the restaurant premises. Must be a positive integer.
    *   `building_age: int (required)` - The age of the building in years. Must be a non-negative integer.
    *   `fire_suppression_system_type: string (required)` - Type of fire suppression system in place (e.g., "Ansul", "Sprinkler", "Kitchen Hood System", "None").
    *   `years_in_business: int (required)` - Number of years the current restaurant has been in business at this location or under current management. Must be a non-negative integer.
    *   `management_experience_years: int (required)` - Total years of experience of the key management personnel in the restaurant industry. Must be a non-negative integer.
    *   `has_delivery_operations: boolean (required)` - Whether the restaurant conducts delivery operations (`true` or `false`).
    *   `has_catering_operations: boolean (required)` - Whether the restaurant conducts catering operations (`true` or `false`).
    *   `seating_capacity: int (required)` - The maximum number of patrons that can be seated. Must be a non-negative integer.
    *   `annual_revenue: float (required)` - The latest full year's annual revenue. Must be a non-negative number.
    *   `health_inspection_score: float (required)` - The latest health inspection score, if available (e.g., 95.0). This may vary by jurisdiction.
    *   `previous_claims_count: int (required)` - Number of insurance claims in the past 3-5 years (as per policy). Must be a non-negative integer.

*   **Success Response (`201 Created`):**
    The response body will be a JSON object representing the `RiskAssessmentOutput`:

    *   `application_id: string` - Unique identifier for the submitted application.
    *   `risk_score: float` - The calculated risk score (e.g., on a 1-10 scale).
    *   `confidence_level: float` - (Placeholder for MVP, e.g., 0.8) Confidence in the assessment.
    *   `decision: string` - The underwriting decision (e.g., "Approved", "Declined", "Refer to manual underwriter").
    *   `recommended_premium: float` - The total recommended insurance premium.
    *   `premium_breakdown: object` - Breakdown of the premium:
        *   `general_liability: float` - Portion of premium for general liability.
        *   `property: float` - Portion of premium for property coverage.
    *   `risk_mitigation_recommendations: array of strings` - (Placeholder for MVP) Suggestions to mitigate risks.
    *   `required_documentation: array of strings` - (Placeholder for MVP) List of documents required to proceed.
    *   `explanation_factors: array of strings` - (Placeholder for MVP) Key factors influencing the assessment.

*   **Error Responses:**
    *   `400 Bad Request`: Returned if the request payload is malformed, missing required fields, or contains invalid data types. The response body may include `{"error": "A description of the error"}`.
    *   `500 Internal Server Error`: Returned if an unexpected error occurs on the server during processing.

---

## Endpoint: Get Assessment Results

*   **Description:** Retrieves the full assessment results for a previously submitted application using its unique application ID.
*   **Method:** `GET`
*   **URL:** `/assessment/<string:application_id>`
*   **Path Parameters:**
    *   `application_id: string (required)` - The unique identifier of the application, obtained from the `/submit` endpoint response.
*   **Success Response (`200 OK`):**
    The response body will be a JSON object with the same structure as the success response for `POST /applications/submit` (i.e., the `RiskAssessmentOutput`).
*   **Error Responses:**
    *   `404 Not Found`: Returned if no assessment is found for the provided `application_id`. Response body: `{"error": "Assessment not found for this application ID"}`.

---

## Endpoint: Get Original Application Data

*   **Description:** Retrieves the original raw data that was submitted for a specific application. This is useful for review or debugging purposes.
*   **Method:** `GET`
*   **URL:** `/applications/<string:application_id>`
*   **Path Parameters:**
    *   `application_id: string (required)` - The unique identifier of the application.
*   **Success Response (`200 OK`):**
    The response body will be a JSON object representing the `RestaurantApplication` data as it was submitted (and stored), including all fields listed in the request body for the `POST /applications/submit` endpoint.
*   **Error Responses:**
    *   `404 Not Found`: Returned if no application data is found for the provided `application_id`. Response body: `{"error": "Application not found"}`.

---
